# 🎨 Визуальная инструкция по настройке Storage

## 📍 Где находятся настройки

```
Supabase Dashboard
    │
    ├── 🏠 Home
    ├── 🔧 Project Settings
    ├── 📊 Database
    ├── 🔐 Authentication
    ├── 📁 Storage  ← ВЫ ЗДЕСЬ!
    ├── 📝 SQL Editor
    └── 🔌 API
```

---

## 🎯 Шаг 1: Создание Buckets

### Интерфейс Storage:

```
┌─────────────────────────────────────────────────────┐
│  Storage                                            │
├─────────────────────────────────────────────────────┤
│                                                     │
│  [+ New bucket]  [↻ Refresh]                       │
│                                                     │
│  📁 Buckets:                                        │
│  ┌───────────────────────────────────────────┐    │
│  │ 📁 images      Public  5MB    [⚙️] [🗑️]   │    │
│  │ 📁 videos      Public  50MB   [⚙️] [🗑️]   │    │
│  │ 📁 avatars     Public  2MB    [⚙️] [🗑️]   │    │
│  └───────────────────────────────────────────┘    │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### Форма создания bucket:

```
┌─────────────────────────────────────────┐
│  Create a new bucket                    │
├─────────────────────────────────────────┤
│                                         │
│  Name *                                 │
│  ┌─────────────────────────────────┐   │
│  │ images                          │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ☑️ Public bucket                       │
│  Make this bucket publicly accessible  │
│                                         │
│  File size limit (bytes)               │
│  ┌─────────────────────────────────┐   │
│  │ 5242880                         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Allowed MIME types                    │
│  ┌─────────────────────────────────┐   │
│  │ image/*                         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Cancel]  [Create bucket]             │
│                                         │
└─────────────────────────────────────────┘
```

---

## 🔐 Шаг 2: Настройка политик

### Интерфейс SQL Editor:

```
┌─────────────────────────────────────────────────────┐
│  SQL Editor                                         │
├─────────────────────────────────────────────────────┤
│  [+ New query]  [▶️ RUN]  [💾 Save]                 │
├─────────────────────────────────────────────────────┤
│                                                     │
│  1  -- Политики для images                         │
│  2  CREATE POLICY "Public can read images"         │
│  3  ON storage.objects FOR SELECT                  │
│  4  USING (bucket_id = 'images');                  │
│  5                                                  │
│  6  CREATE POLICY "Anyone can upload images"       │
│  7  ON storage.objects FOR INSERT                  │
│  8  WITH CHECK (bucket_id = 'images');             │
│  9                                                  │
│ 10  -- Политики для videos                         │
│ 11  CREATE POLICY "Public can read videos"         │
│ 12  ON storage.objects FOR SELECT                  │
│ 13  USING (bucket_id = 'videos');                  │
│ 14                                                  │
│                                                     │
├─────────────────────────────────────────────────────┤
│  ✅ Success. No rows returned                       │
│  Rows: 0  Time: 0.123s                             │
└─────────────────────────────────────────────────────┘
```

---

## 🧪 Шаг 3: Тестирование

### Загрузка файла через Dashboard:

```
┌─────────────────────────────────────────────────────┐
│  Storage > images                                   │
├─────────────────────────────────────────────────────┤
│  [⬆️ Upload file]  [📁 New folder]  [↻ Refresh]     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📁 blog-images/                                    │
│    📄 1234567890-abc123.jpg    2.3 MB              │
│    📄 1234567891-def456.png    1.8 MB              │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │  Drag & drop files here                     │  │
│  │  or click to browse                         │  │
│  │                                              │  │
│  │           📤                                 │  │
│  │                                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### Просмотр загруженного файла:

```
┌─────────────────────────────────────────────────────┐
│  File details: 1234567890-abc123.jpg                │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Preview:                                           │
│  ┌─────────────────────────────────────────────┐  │
│  │                                              │  │
│  │         [🖼️ Image Preview]                   │  │
│  │                                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Name: 1234567890-abc123.jpg                       │
│  Size: 2.3 MB                                      │
│  Type: image/jpeg                                  │
│  Created: 2026-01-18 12:34:56                      │
│                                                     │
│  Public URL:                                        │
│  ┌─────────────────────────────────────────────┐  │
│  │ https://xxx.supabase.co/storage/v1/...      │  │
│  └─────────────────────────────────────────────┘  │
│  [📋 Copy URL]  [⬇️ Download]  [🗑️ Delete]         │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 🎬 Использование в блоге

### Админ-панель с MediaUploader:

```
┌─────────────────────────────────────────────────────┐
│  Admin Panel > Create Post                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Title:                                             │
│  ┌─────────────────────────────────────────────┐  │
│  │ Мой новый пост                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Content:                                           │
│  ┌─────────────────────────────────────────────┐  │
│  │ # Заголовок                                 │  │
│  │                                              │  │
│  │ Текст поста...                              │  │
│  │                                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Media:                                             │
│  [📷 Upload Image]  [🎬 Upload Video]  [📁 Gallery] │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │  Drag & drop video here                     │  │
│  │  or click to browse                         │  │
│  │                                              │  │
│  │  Supported: MP4, WebM, AVI, MOV (max 50MB) │  │
│  │                                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  [💾 Save Draft]  [📤 Publish]                      │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### Пост с кастомным видео-плеером:

```
┌─────────────────────────────────────────────────────┐
│  Blog Post                                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  # Мой новый пост                                  │
│                                                     │
│  Текст поста...                                     │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │  🎬 Название видео                          │  │
│  ├─────────────────────────────────────────────┤  │
│  │                                              │  │
│  │         [▶️ Video Player]                    │  │
│  │                                              │  │
│  ├─────────────────────────────────────────────┤  │
│  │ ▶️ 🔊 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 🖥️    │  │
│  │    0:00 / 5:10                              │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Продолжение текста...                             │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 📊 Структура после настройки

```
Supabase Project
│
├── 📁 Storage
│   │
│   ├── 📁 images (Public, 5MB)
│   │   ├── 📁 blog-images/
│   │   │   ├── 📄 image1.jpg
│   │   │   ├── 📄 image2.png
│   │   │   └── 📄 image3.webp
│   │   └── 📁 other-images/
│   │
│   ├── 📁 videos (Public, 50MB)
│   │   ├── 📁 blog-videos/
│   │   │   ├── 🎬 video1.mp4
│   │   │   ├── 🎬 video2.webm
│   │   │   └── 🎬 video3.mov
│   │   └── 📁 other-videos/
│   │
│   └── 📁 avatars (Public, 2MB)
│       ├── 👤 user1-avatar.jpg
│       ├── 👤 user2-avatar.png
│       └── 👤 user3-avatar.webp
│
└── 🔐 Policies
    ├── ✅ Public can read images
    ├── ✅ Anyone can upload images
    ├── ✅ Public can read videos
    ├── ✅ Anyone can upload videos
    ├── ✅ Public can read avatars
    └── ✅ Anyone can upload avatars
```

---

## 🎯 Чеклист с эмодзи

### Создание buckets:
- [ ] 📁 Создал bucket "images"
- [ ] ✅ Включил Public для images
- [ ] 📏 Установил лимит 5MB для images
- [ ] 📁 Создал bucket "videos"
- [ ] ✅ Включил Public для videos
- [ ] 📏 Установил лимит 50MB для videos
- [ ] 📁 Создал bucket "avatars"
- [ ] ✅ Включил Public для avatars
- [ ] 📏 Установил лимит 2MB для avatars

### Настройка политик:
- [ ] 📝 Открыл SQL Editor
- [ ] 📋 Скопировал SQL скрипт
- [ ] ▶️ Выполнил скрипт
- [ ] ✅ Проверил результат

### Тестирование:
- [ ] 📤 Загрузил тестовое изображение
- [ ] 🔗 Скопировал Public URL
- [ ] 🌐 Открыл URL в браузере
- [ ] 🎬 Загрузил тестовое видео
- [ ] 🔗 Скопировал Public URL видео
- [ ] ▶️ Проверил воспроизведение

### Интеграция:
- [ ] 💻 Протестировал через код
- [ ] 🎨 Добавил MediaUploader в админку
- [ ] 📁 Добавил MediaGallery
- [ ] 🎬 Проверил CustomVideoPlayer
- [ ] 📝 Вставил видео в пост
- [ ] ✅ Проверил отображение в блоге

---

## 🎉 Готово!

```
    ✨ Storage настроен! ✨
    
    ┌─────────────────────────┐
    │   🎬 Видео работает!    │
    │   📷 Фото работает!     │
    │   👤 Аватарки работают! │
    └─────────────────────────┘
    
    Теперь можно:
    ✅ Загружать медиа
    ✅ Использовать плеер
    ✅ Создавать посты с видео
    
    🚀 Вперед к созданию контента!
```

---

## 📚 Дополнительные материалы

- 📖 `НАСТРОЙКА-STORAGE.md` - подробная инструкция
- ⚡ `БЫСТРАЯ-НАСТРОЙКА.md` - за 5 минут
- 🔧 `setup-storage-complete.sql` - SQL скрипт
- 📘 `README-CUSTOM-VIDEO-PLAYER.md` - полная документация
- 📝 `MEDIA-CHEATSHEET.md` - шпаргалка
- 🇷🇺 `ВИДЕО-ИНСТРУКЦИЯ.md` - на русском
